<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PDUSU EDUCATION ‚Äî Students</title>
<meta name="theme-color" content="#2563eb" />
<style>
:root{
  --bg:#f8fafc; --text:#0f172a; --card:#ffffff; --muted:#475569; --accent:#2563eb;
}
[data-theme="dark"]{
  --bg:#071022; --text:#eef6ff; --card:#0b1220; --muted:#9fb0c8; --accent:#3b82f6;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}
header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:linear-gradient(90deg,#6366f1,#ec4899,#f59e0b);color:#fff}
.header-left{display:flex;gap:12px;align-items:center}
#logo{width:68px;height:68px;border-radius:10px;background:#fff;padding:6px;cursor:pointer;object-fit:cover;box-shadow:0 6px 18px rgba(0,0,0,0.12)}
.header-title h1{margin:0;font-size:20px}
.header-title p{margin:4px 0 0 0;font-size:13px;opacity:.95}
.theme-toggle{background:rgba(255,255,255,0.95);color:var(--accent);border:none;padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:700}
.container{width:95%;max-width:1200px;margin:18px auto;display:flex;gap:18px;flex-wrap:wrap;align-items:flex-start}
.sidebar{width:240px;min-width:200px;background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
.sidebar h3{margin:0 0 8px 0}
.link{display:block;text-align:center;background:var(--accent);color:#fff;padding:10px;border-radius:8px;margin:8px 0;text-decoration:none;font-weight:700}
.content{flex:1;min-width:300px}
.top-row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px}
.card{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.06);flex:1;min-width:220px}
.card h3{margin:0 0 8px 0;color:var(--accent)}
.semester-list{display:flex;gap:8px;flex-wrap:wrap}
.sem-btn{padding:8px 12px;border-radius:8px;border:none;background:#f1f5f9;color:var(--text);cursor:pointer;font-weight:700}
.sem-btn:hover{background:rgba(37,99,235,0.08)}
.table-wrap{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.06);overflow:auto}
table{width:100%;border-collapse:collapse;font-size:14px}
thead th{position:sticky;top:0;background:var(--card);padding:10px;text-align:left;border-bottom:1px solid rgba(0,0,0,0.06)}
tbody td{padding:10px;border-bottom:1px solid rgba(0,0,0,0.04)}
.btn{padding:8px 10px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
.btn-primary{background:var(--accent);color:#fff}
.note{font-size:13px;color:var(--muted);margin-top:8px}
.footer{margin-top:18px;padding:12px;text-align:center;background:var(--card);color:var(--muted)}
@media(max-width:900px){.container{padding:0 12px}.sidebar{width:100%}.top-row{flex-direction:column}}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <img id="logo" src="PDUSU-logo.png" alt="PDUSU Logo">
    <div class="header-title">
      <h1>üéì PDUSU EDUCATION</h1>
      <p>‡§Æ‡•á‡§π‡§®‡§§ ‡§π‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§π‡•à ‚Äî ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§§‡•á ‡§∞‡§π‡•ã, ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã!</p>
    </div>
  </div>
  <div>
    <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">üåû Light</button>
  </div>
</header>

<main class="container">
  <aside class="sidebar" aria-label="Useful links">
    <h3>‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏</h3>
    <a class="link" href="https://shekhauniexam.in/" target="_blank" rel="noopener">üìÑ Result</a>
    <a class="link" href="https://shekhauni.ac.in/Home/Syllabus" target="_blank" rel="noopener">üìò Syllabus</a>
    <a class="link" href="https://shekhauni.ac.in/Home/Examination" target="_blank" rel="noopener">üì∞ University News</a>
    <a class="link" href="https://www.youtube.com/" target="_blank" rel="noopener">‚ñ∂Ô∏è YouTube</a>
    <p class="note">‡§Ø‡§¶‡§ø ‡§Ü‡§™ Admin ‡§π‡•ã‡§Ç ‚Üí <strong>admin.html</strong> ‡§ñ‡•ã‡§≤‡•á‡§Ç ‡§Ø‡§æ logo ‡§™‡§∞ ‡§§‡•Ä‡§® ‡§¨‡§æ‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</p>
  </aside>

  <section class="content" aria-live="polite">
    <div class="top-row">
      <div class="card">
        <h3>B.Sc</h3>
        <div class="semester-list" id="bscList"></div>
      </div>
      <div class="card">
        <h3>B.A.</h3>
        <div class="semester-list" id="baList"></div>
      </div>
      <div class="card">
        <h3>B.Com</h3>
        <div class="semester-list" id="bcomList"></div>
      </div>
    </div>

    <div class="table-wrap">
      <h3>Available Notes & PDFs</h3>
      <table id="coursesTable" aria-describedby="List of uploaded PDFs">
        <thead>
          <tr><th>Course</th><th>Semester</th><th>Subject</th><th>YouTube</th><th>PDF</th><th>Uploaded At</th></tr>
        </thead>
        <tbody id="coursesBody"><tr><td colspan="6" class="note">Loading...</td></tr></tbody>
      </table>
    </div>
  </section>
</main>

<div class="footer">¬© 2025 PDUSU EDUCATION | Designed for Students</div>

<!-- Modal (used by triple-click fallback) -->
<div id="modalBackdrop" style="display:none"></div>

<!-- Firebase + App script -->
<script type="module">
/* ========== Firebase config (‡§Ü‡§™‡§®‡•á ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•Å‡§Ü) ========== */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-analytics.js";
import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyADiTKwpQ2uW5DTo8lUp44TDAbSPQ3ntMQ",
  authDomain: "pdusu-education-4503b.firebaseapp.com",
  projectId: "pdusu-education-4503b",
  storageBucket: "pdusu-education-4503b.firebasestorage.app",
  messagingSenderId: "186812462719",
  appId: "1:186812462719:web:2108c8d68c12ff2b9f314a",
  measurementId: "G-4YT9MXGYWS"
};

const app = initializeApp(firebaseConfig);
try{ getAnalytics(app);}catch(e){}
/* Firestore */
const db = getFirestore(app);
const COLLECTION = 'courses';

/* Helpers */
function esc(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* Theme system */
const root = document.documentElement;
const themeToggle = document.getElementById('themeToggle');
function applyTheme(t){ if(t==='dark') root.setAttribute('data-theme','dark'); else root.removeAttribute('data-theme'); themeToggle.textContent = t==='dark'?'üåô Dark':'üåû Light'; localStorage.setItem('pdusu_theme', t);}
(function(){ const saved = localStorage.getItem('pdusu_theme')||'light'; applyTheme(saved); })();
themeToggle.addEventListener('click', ()=>{ const cur = root.getAttribute('data-theme')==='dark'?'dark':'light'; applyTheme(cur==='dark'?'light':'dark'); });

/* Render semester buttons */
function renderSemesters(){
  const map = [{id:'bscList',label:'BSC'},{id:'baList',label:'BA'},{id:'bcomList',label:'BCOM'}];
  map.forEach(m=>{
    const el = document.getElementById(m.id);
    el.innerHTML = '';
    for(let i=1;i<=6;i++){
      const b = document.createElement('button');
      b.className='sem-btn';
      b.textContent = 'Sem ' + i;
      b.onclick = ()=> loadTable(m.label, i);
      el.appendChild(b);
    }
  });
}

/* Fetch from Firestore */
async function fetchAll(){
  const colRef = collection(db, COLLECTION);
  const q = query(colRef, orderBy('course'), orderBy('semester'));
  const snap = await getDocs(q);
  const arr = [];
  snap.forEach(doc => {
    const d = doc.data();
    arr.push({
      id: doc.id,
      course: d.course || d.stream || '',
      semester: d.semester || d.sem || 0,
      subject: d.subject || d.subject_name || d.class_name || '',
      youtube: d.youtube || d.youtube_link || '',
      pdf: d.pdfUrl || d.pdf_url || d.pdf || '',
      uploadedAt: d.uploadedAt ? (d.uploadedAt.toDate ? d.uploadedAt.toDate() : new Date(d.uploadedAt)) : null
    });
  });
  return arr;
}

async function renderTable(items){
  const tbody = document.getElementById('coursesBody');
  if(!items || items.length===0){
    tbody.innerHTML = '<tr><td colspan="6" class="note">‡§ï‡•ã‡§à ‡§®‡•ã‡§ü ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§</td></tr>';
    return;
  }
  let html = '';
  items.forEach(it=>{
    html += `<tr>
      <td>${esc(it.course)}</td>
      <td>${esc(it.semester)}</td>
      <td>${esc(it.subject)}</td>
      <td>${it.youtube ? `<a href="${esc(it.youtube)}" target="_blank">‚ñ∂Ô∏è Open</a>` : '-'}</td>
      <td>${it.pdf ? `<a href="${esc(it.pdf)}" target="_blank" class="btn btn-primary">üì• Download</a>` : '-'}</td>
      <td>${it.uploadedAt ? esc(it.uploadedAt.toLocaleString()) : '-'}</td>
    </tr>`;
  });
  tbody.innerHTML = html;
}

async function loadAll(){ const items = await fetchAll(); await renderTable(items); }
async function loadTable(course, sem){ const all = await fetchAll(); const filtered = all.filter(i => i.course.toUpperCase() === course.toUpperCase() && Number(i.semester) === Number(sem)); await renderTable(filtered); document.querySelector('.table-wrap').scrollIntoView({behavior:'smooth'}); }

/* init */
renderSemesters();
loadAll();

/* Optional: triple-click logo opens admin.html or prompt */
let clickCount=0;
document.getElementById('logo').addEventListener('click', ()=>{ clickCount++; if(clickCount===3){ clickCount=0; if(confirm('Open admin page?')) window.location.href='admin.html'; } setTimeout(()=>clickCount=0,1500); });

</script>
</body>
</html>
